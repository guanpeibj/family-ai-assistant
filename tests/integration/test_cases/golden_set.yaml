# FAA 黄金测试集
# 
# 这是用于AB测试和模型对比的标准测试集
# 共55个最具代表性的测试用例（完全覆盖所有P0核心功能）
#
# 原则：
# 1. 覆盖readme.MD中所有主要场景
# 2. 覆盖所有P0核心测试（100%）
# 3. 平衡简单/中等/复杂难度
# 4. 包含关键边界情况

test_suite_name: "golden_set"
test_suite_version: "1.2"
total_cases: 55

# ===== 分类1：基础记账 (10个) =====
accounting_basic:
  - test_id: "TC001"
    test_name: "简单记账-完整信息"
    priority: "P0"
    difficulty: "simple"
    user_input: "今天买菜花了80元"
    expected_behavior:
      intent: "记录支出"
      key_actions: ["存储账目", "识别类目为食材", "记录金额80元"]
      response_should: "确认记账成功，告知类目和金额"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        amount: 80.0
        category: "食材"
        sub_category: "蔬菜"
        occurred_at: "today"
      tolerance:
        amount: 0
      required_fields: ["type", "category", "sub_category", "amount"]
    
  - test_id: "TC002"
    test_name: "大额支出记录"
    priority: "P0"
    difficulty: "simple"
    user_input: "买了台电脑3500元"
    expected_behavior:
      intent: "记录大额支出"
      key_actions: ["存储账目", "识别类目", "记录金额"]
      response_should: "确认记账，可能提示大额"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        amount: 3500.0
        occurred_at: "today"
      tolerance:
        amount: 0

  - test_id: "TC003"
    test_name: "收入记录"
    priority: "P0"
    difficulty: "simple"
    user_input: "今天发工资10000元"
    expected_behavior:
      intent: "记录收入"
      key_actions: ["存储收入记录", "记录金额"]
      response_should: "确认收入记录成功"
    data_verification:
      should_store: true
      expected_data:
        type: "income"
        amount: 10000.0
        occurred_at: "today"

  - test_id: "TC004"
    test_name: "跨月记账"
    priority: "P0"
    difficulty: "medium"
    user_input: "记一下，上个月28号买了礼物200元"
    expected_behavior:
      intent: "记录历史支出"
      key_actions: ["存储账目", "正确识别时间为上月28号"]
      response_should: "确认记录历史账目"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        amount: 200.0
        occurred_at: "last_month_28"

  - test_id: "TC005"
    test_name: "类目映射-外出就餐"
    priority: "P0"
    difficulty: "simple"
    user_input: "外卖花了45元"
    expected_behavior:
      intent: "记录外出就餐支出"
      key_actions: ["识别为外出就餐类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "外出就餐"
        sub_category: "外卖"
      required_fields: ["type", "category", "sub_category"]

  - test_id: "TC006"
    test_name: "类目映射-交通"
    priority: "P0"
    difficulty: "simple"
    user_input: "打车去医院35元"
    expected_behavior:
      intent: "记录交通支出"
      key_actions: ["识别为交通类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "交通"
        sub_category: "打车"
      required_fields: ["type", "category", "sub_category"]

  - test_id: "TC007"
    test_name: "类目映射-医疗保健"
    priority: "P0"
    difficulty: "simple"
    user_input: "买感冒药120元"
    expected_behavior:
      intent: "记录医疗保健支出"
      key_actions: ["识别为医疗保健类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "医疗保健"
        sub_category: "药品"
      required_fields: ["type", "category", "sub_category"]

  - test_id: "TC008"
    test_name: "类目映射-少儿培训"
    priority: "P0"
    difficulty: "simple"
    user_input: "孩子钢琴课200元"
    expected_behavior:
      intent: "记录培训支出"
      key_actions: ["识别为少儿培训类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "少儿培训"

  - test_id: "TC009"
    test_name: "类目映射-住房"
    priority: "P0"
    difficulty: "simple"
    user_input: "交物业费500元"
    expected_behavior:
      intent: "记录住房支出"
      key_actions: ["识别为住房类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "住房"
        sub_category: "物业费"
      required_fields: ["type", "category", "sub_category"]

  - test_id: "TC010"
    test_name: "类目映射-日用品"
    priority: "P0"
    difficulty: "simple"
    user_input: "买洗发水35元"
    expected_behavior:
      intent: "记录日用品支出"
      key_actions: ["识别为日用品类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "日用品"

# ===== 分类2：查询功能 (10个) =====
query_basic:
  - test_id: "TC011"
    test_name: "本月支出查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "这个月一共花了多少钱？"
    expected_behavior:
      intent: "查询本月总支出"
      key_actions: ["查询本月记录", "计算总额", "回复结果"]
      response_should: "给出本月总支出金额"
    data_verification:
      should_store: false
    
  - test_id: "TC012"
    test_name: "类目支出查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "这个月食材花了多少？"
    expected_behavior:
      intent: "查询特定类目支出"
      key_actions: ["过滤食材类目", "计算总额"]
      response_should: "给出食材类支出金额"
    data_verification:
      should_store: false

  - test_id: "TC013"
    test_name: "最近支出查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "最近3天花了多少钱？"
    expected_behavior:
      intent: "查询最近支出"
      key_actions: ["查询最近3天", "计算总额"]
      response_should: "给出最近3天支出金额"
    data_verification:
      should_store: false

  - test_id: "TC014"
    test_name: "预算查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "这个月预算还剩多少？"
    expected_behavior:
      intent: "查询预算剩余"
      key_actions: ["查询预算设置", "计算已用金额", "计算剩余"]
      response_should: "告知预算剩余金额和百分比"
    data_verification:
      should_store: false

  - test_id: "TC015"
    test_name: "月度对比查询"
    priority: "P1"
    difficulty: "complex"
    user_input: "这个月比上个月多花了多少？"
    expected_behavior:
      intent: "对比两个月支出"
      key_actions: ["查询本月", "查询上月", "计算差值"]
      response_should: "给出差值和百分比变化"
    data_verification:
      should_store: false

  - test_id: "TC016"
    test_name: "类目排名查询"
    priority: "P1"
    difficulty: "complex"
    user_input: "这个月哪个类目花得最多？"
    expected_behavior:
      intent: "查询支出排名"
      key_actions: ["按类目聚合", "排序", "给出前几名"]
      response_should: "列出支出最多的类目和金额"
    data_verification:
      should_store: false

  - test_id: "TC017"
    test_name: "趋势查询"
    priority: "P1"
    difficulty: "complex"
    user_input: "近三个月外出就餐支出趋势"
    expected_behavior:
      intent: "查询支出趋势"
      key_actions: ["查询3个月数据", "按月聚合", "分析趋势"]
      response_should: "给出每月金额和趋势分析"
    data_verification:
      should_store: false

  - test_id: "TC018"
    test_name: "昨天支出查询"
    priority: "P0"
    difficulty: "simple"
    user_input: "昨天一共花了多少？"
    expected_behavior:
      intent: "查询昨日支出"
      key_actions: ["查询昨天记录", "计算总额"]
      response_should: "给出昨天总支出"
    data_verification:
      should_store: false

  - test_id: "TC019"
    test_name: "单笔查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "我今天买菜花了多少来着？"
    expected_behavior:
      intent: "查询特定记录"
      key_actions: ["搜索今天的买菜记录", "返回金额"]
      response_should: "告知买菜花费金额"
    data_verification:
      should_store: false

  - test_id: "TC020"
    test_name: "收支总览查询"
    priority: "P1"
    difficulty: "medium"
    user_input: "这个月收支情况怎么样？"
    expected_behavior:
      intent: "查询收支总览"
      key_actions: ["查询收入", "查询支出", "计算结余"]
      response_should: "给出收入、支出、结余"
    data_verification:
      should_store: false

# ===== 分类3：提醒功能 (5个) =====
reminder:
  - test_id: "TC021"
    test_name: "创建单次提醒"
    priority: "P0"
    difficulty: "simple"
    user_input: "下周一提醒我交电费"
    expected_behavior:
      intent: "创建提醒"
      key_actions: ["解析时间为下周一", "创建提醒任务"]
      response_should: "确认提醒已设置"
    data_verification:
      should_store: true
      expected_data:
        type: "reminder_request"

  - test_id: "TC022"
    test_name: "创建重复提醒"
    priority: "P0"
    difficulty: "medium"
    user_input: "每天早上7点提醒我给孩子吃维生素"
    expected_behavior:
      intent: "创建重复提醒"
      key_actions: ["识别重复模式", "创建重复提醒"]
      response_should: "确认重复提醒已设置"
    data_verification:
      should_store: true

  - test_id: "TC023"
    test_name: "查询提醒"
    priority: "P0"
    difficulty: "simple"
    user_input: "我设了哪些提醒？"
    expected_behavior:
      intent: "查询提醒列表"
      key_actions: ["查询所有未完成提醒", "列出提醒"]
      response_should: "列出所有待办提醒"
    data_verification:
      should_store: false

  - test_id: "TC024"
    test_name: "取消提醒"
    priority: "P1"
    difficulty: "medium"
    user_input: "取消下周一交电费的提醒"
    expected_behavior:
      intent: "取消特定提醒"
      key_actions: ["搜索匹配的提醒", "标记为取消"]
      response_should: "确认提醒已取消"
    data_verification:
      should_store: false

  - test_id: "TC025"
    test_name: "延期提醒"
    priority: "P1"
    difficulty: "medium"
    user_input: "把交电费的提醒改到后天"
    expected_behavior:
      intent: "修改提醒时间"
      key_actions: ["找到提醒", "更新时间"]
      response_should: "确认提醒时间已更新"
    data_verification:
      should_store: false

# ===== 分类4：健康记录 (5个) =====
health:
  - test_id: "TC026"
    test_name: "身高记录"
    priority: "P0"
    difficulty: "simple"
    user_input: "儿子今天身高90cm"
    expected_behavior:
      intent: "记录身高"
      key_actions: ["识别家庭成员", "记录身高数据"]
      response_should: "确认身高记录成功"
    data_verification:
      should_store: true
      expected_data:
        type: "health"
        metric: "height"
        value: 90

  - test_id: "TC027"
    test_name: "体重记录"
    priority: "P0"
    difficulty: "simple"
    user_input: "大女儿体重25公斤"
    expected_behavior:
      intent: "记录体重"
      key_actions: ["识别家庭成员", "记录体重数据"]
      response_should: "确认体重记录成功"
    data_verification:
      should_store: true
      expected_data:
        type: "health"
        metric: "weight"
        value: 25

  - test_id: "TC028"
    test_name: "健康查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "儿子最近身高体重变化"
    expected_behavior:
      intent: "查询健康趋势"
      key_actions: ["查询历史记录", "分析趋势"]
      response_should: "给出身高体重变化情况"
    data_verification:
      should_store: false

  - test_id: "TC029"
    test_name: "疫苗记录"
    priority: "P1"
    difficulty: "medium"
    user_input: "二女儿今天打了流感疫苗"
    expected_behavior:
      intent: "记录疫苗"
      key_actions: ["识别成员", "记录疫苗信息"]
      response_should: "确认疫苗记录，可能询问下次时间"
    data_verification:
      should_store: true
      expected_data:
        type: "health"
        category: "vaccine"

  - test_id: "TC030"
    test_name: "就医记录"
    priority: "P1"
    difficulty: "medium"
    user_input: "大女儿今天看医生，诊断是感冒"
    expected_behavior:
      intent: "记录就医"
      key_actions: ["识别成员", "记录诊断信息"]
      response_should: "确认就医记录"
    data_verification:
      should_store: true
      expected_data:
        type: "health"
        category: "medical_visit"

# ===== 分类5：预算管理 (5个) =====
budget:
  - test_id: "TC031"
    test_name: "设置月度预算"
    priority: "P0"
    difficulty: "medium"
    user_input: "设置本月预算10000元"
    expected_behavior:
      intent: "设置预算"
      key_actions: ["保存预算设置"]
      response_should: "确认预算已设置"
    data_verification:
      should_store: true
      expected_data:
        type: "budget_setting"
        amount: 10000

  - test_id: "TC032"
    test_name: "设置分类预算"
    priority: "P0"
    difficulty: "complex"
    user_input: "本月预算：食材3000、外出就餐1000、少儿培训2000"
    expected_behavior:
      intent: "设置分类预算"
      key_actions: ["解析多个类目", "保存各类预算"]
      response_should: "确认各类目预算已设置"
    data_verification:
      should_store: true

  - test_id: "TC033"
    test_name: "预算警告"
    priority: "P1"
    difficulty: "medium"
    user_input: "本月预算使用情况"
    expected_behavior:
      intent: "查询预算状态"
      key_actions: ["计算已用百分比", "判断是否需要警告"]
      response_should: "告知预算使用情况，超标时警告"
    data_verification:
      should_store: false

  - test_id: "TC034"
    test_name: "修改预算"
    priority: "P1"
    difficulty: "medium"
    user_input: "把本月预算改为12000元"
    expected_behavior:
      intent: "修改预算"
      key_actions: ["更新预算设置"]
      response_should: "确认预算已更新"
    data_verification:
      should_store: false

  - test_id: "TC035"
    test_name: "预算建议"
    priority: "P1"
    difficulty: "complex"
    user_input: "下个月预算应该怎么设置？"
    expected_behavior:
      intent: "预算建议"
      key_actions: ["分析历史数据", "给出建议"]
      response_should: "基于历史数据给出预算建议"
    data_verification:
      should_store: false

# ===== 分类6：信息管理 (5个) =====
information:
  - test_id: "TC036"
    test_name: "存储信息"
    priority: "P0"
    difficulty: "simple"
    user_input: "帮我记一下，大门钥匙放在沙发垫子下面"
    expected_behavior:
      intent: "存储信息"
      key_actions: ["保存信息"]
      response_should: "确认信息已记录"
    data_verification:
      should_store: true
      expected_data:
        type: "info"

  - test_id: "TC037"
    test_name: "更新信息"
    priority: "P0"
    difficulty: "medium"
    user_input: "大门钥匙现在放到衣柜上面了"
    expected_behavior:
      intent: "更新已有信息"
      key_actions: ["识别需要更新", "更新信息"]
      response_should: "确认信息已更新"
    data_verification:
      should_store: true

  - test_id: "TC038"
    test_name: "查询信息"
    priority: "P0"
    difficulty: "simple"
    user_input: "大门钥匙放哪儿了？"
    expected_behavior:
      intent: "查询信息"
      key_actions: ["搜索相关信息", "返回结果"]
      response_should: "告知钥匙位置"
    data_verification:
      should_store: false

  - test_id: "TC039"
    test_name: "密码管理"
    priority: "P1"
    difficulty: "simple"
    user_input: "我家wifi密码是12345678"
    expected_behavior:
      intent: "存储密码"
      key_actions: ["安全存储密码信息"]
      response_should: "确认密码已记录"
    data_verification:
      should_store: true
      expected_data:
        type: "info"
        category: "password"

  - test_id: "TC040"
    test_name: "日程记录"
    priority: "P1"
    difficulty: "medium"
    user_input: "大女儿下周三学校开家长会"
    expected_behavior:
      intent: "记录日程"
      key_actions: ["识别时间和事件", "记录日程"]
      response_should: "确认日程已记录，可能询问是否需要提醒"
    data_verification:
      should_store: true
      expected_data:
        type: "schedule"

# ===== 分类7：澄清对话 (5个) =====
clarification:
  - test_id: "TC041"
    test_name: "缺少金额澄清"
    priority: "P0"
    difficulty: "medium"
    user_input: "买了衣服"
    expected_behavior:
      intent: "记账但信息不完整"
      key_actions: ["识别缺少金额", "发起澄清"]
      response_should: "询问金额"
    data_verification:
      should_store: false

  - test_id: "TC042"
    test_name: "缺少对象澄清"
    priority: "P0"
    difficulty: "medium"
    user_input: "给孩子买了书100元"
    expected_behavior:
      intent: "记账但缺少具体对象"
      key_actions: ["识别缺少具体孩子", "发起澄清"]
      response_should: "询问是哪个孩子"
    data_verification:
      should_store: false

  - test_id: "TC043"
    test_name: "缺少时间澄清"
    priority: "P1"
    difficulty: "medium"
    user_input: "下次提醒我交电费"
    expected_behavior:
      intent: "创建提醒但时间不明确"
      key_actions: ["识别缺少具体时间", "询问时间"]
      response_should: "询问具体时间"
    data_verification:
      should_store: false

  - test_id: "TC044"
    test_name: "歧义澄清"
    priority: "P1"
    difficulty: "complex"
    user_input: "上次买菜花了多少？"
    expected_behavior:
      intent: "查询但'上次'不明确"
      key_actions: ["识别歧义", "询问具体是哪次"]
      response_should: "询问具体时间或提供最近记录让用户确认"
    data_verification:
      should_store: false

  - test_id: "TC045"
    test_name: "多轮澄清"
    priority: "P1"
    difficulty: "complex"
    user_input: "记账"
    expected_behavior:
      intent: "记账但信息极度不完整"
      key_actions: ["识别需要多个信息", "逐步澄清"]
      response_should: "询问必要信息（金额、类目等）"
    data_verification:
      should_store: false

# ===== 分类8：边界情况 (5个) =====
edge_cases:
  - test_id: "TC046"
    test_name: "零元记录"
    priority: "P2"
    difficulty: "simple"
    user_input: "今天用优惠券，午餐花了0元"
    expected_behavior:
      intent: "记录零元支出"
      key_actions: ["接受0元记录"]
      response_should: "确认记录"
    data_verification:
      should_store: true
      expected_data:
        amount: 0

  - test_id: "TC047"
    test_name: "负数处理"
    priority: "P2"
    difficulty: "medium"
    user_input: "退货，退了50元"
    expected_behavior:
      intent: "记录退款"
      key_actions: ["识别为退款或负支出"]
      response_should: "确认退款记录"
    data_verification:
      should_store: true

  - test_id: "TC048"
    test_name: "无关对话"
    priority: "P2"
    difficulty: "simple"
    user_input: "今天天气真好"
    expected_behavior:
      intent: "闲聊"
      key_actions: ["识别为无业务意图", "礼貌回应"]
      response_should: "礼貌回应，不执行业务操作"
    data_verification:
      should_store: false

  - test_id: "TC049"
    test_name: "模糊金额"
    priority: "P2"
    difficulty: "medium"
    user_input: "买菜大概花了八十多块钱"
    expected_behavior:
      intent: "记账但金额模糊"
      key_actions: ["识别模糊金额", "可能使用中间值或询问"]
      response_should: "确认记录或询问准确金额"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"

  - test_id: "TC050"
    test_name: "超长输入"
    priority: "P2"
    difficulty: "medium"
    user_input: "今天去超市买了很多东西，有牛奶、面包、鸡蛋、蔬菜、水果、零食等等，一共花了280元，用的是支付宝支付，还用了10元优惠券"
    expected_behavior:
      intent: "记账但信息冗长"
      key_actions: ["提取核心信息", "记录账目"]
      response_should: "确认记录核心信息"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        amount: 280

# ===== 补充用例：确保P0完整覆盖 (5个) =====
p0_补充:
  - test_id: "TC051"
    test_name: "类目映射-兴趣娱乐"
    priority: "P0"
    difficulty: "simple"
    user_input: "看电影100元"
    expected_behavior:
      intent: "记录娱乐支出"
      key_actions: ["识别为兴趣娱乐类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "兴趣娱乐"

  - test_id: "TC052"
    test_name: "类目映射-衣服"
    priority: "P0"
    difficulty: "simple"
    user_input: "买了件衣服180元"
    expected_behavior:
      intent: "记录衣服支出"
      key_actions: ["识别为衣服类"]
      response_should: "确认记账"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"
        category: "衣服"

  - test_id: "TC053"
    test_name: "多条记录准确性"
    priority: "P0"
    difficulty: "medium"
    user_input: "今天买菜50元，打车30元，午餐45元"
    expected_behavior:
      intent: "一次记录多笔支出"
      key_actions: ["识别3笔支出", "分别记录"]
      response_should: "确认记录多笔支出"
    data_verification:
      should_store: true
      expected_data:
        type: "expense"

  - test_id: "TC054"
    test_name: "家庭成员查询"
    priority: "P0"
    difficulty: "medium"
    user_input: "这个月给大女儿花了多少钱？"
    expected_behavior:
      intent: "按家庭成员查询支出"
      key_actions: ["识别大女儿", "筛选相关支出", "计算总额"]
      response_should: "告知给大女儿的支出金额"
    data_verification:
      should_store: false

  - test_id: "TC055"
    test_name: "多轮上下文理解"
    priority: "P0"
    difficulty: "complex"
    user_input: "这个月花了多少？"
    expected_behavior:
      intent: "查询月度支出"
      key_actions: ["查询本月记录", "计算总额"]
      response_should: "给出本月总支出"
    data_verification:
      should_store: false
    context:
      description: "前面已讨论过外出就餐支出，这里测试是否能理解'花了多少'指总支出"

# ===== 多轮对话测试 (6个) =====
# 使用 turns 字段定义多轮对话
multi_turn_tests:
  - test_id: "MT001"
    test_name: "多轮记账-追问补全信息"
    priority: "P0"
    difficulty: "medium"
    turns:
      - turn: 1
        user_input: "记账，花了100元"
        expected_behavior:
          intent: "记账意图，但信息不完整"
          key_actions: ["识别缺少类目信息", "主动追问"]
          response_should: "询问购买了什么或支出类目"
        data_verification:
          should_store: false  # 第一轮不应该存储
      
      - turn: 2
        user_input: "买了手套，送给妻子"
        expected_behavior:
          intent: "补全信息并完成记账"
          key_actions: ["存储账目", "关联到妻子", "识别为衣服或日用品"]
          response_should: "确认记账成功，告知金额和类目"
        data_verification:
          should_store: true
          expected_data:
            type: "expense"
            amount: 100.0
            category: "衣服"
            occurred_at: "today"
          tolerance:
            amount: 0
          required_fields: ["type", "category", "amount"]
  
  - test_id: "MT002"
    test_name: "多轮提醒-修改时间"
    priority: "P0"
    difficulty: "medium"
    turns:
      - turn: 1
        user_input: "提醒我，大女儿家长会在下周三"
        expected_behavior:
          intent: "设置提醒"
          key_actions: ["存储提醒", "识别大女儿", "识别时间为下周三"]
          response_should: "确认提醒已设置"
        data_verification:
          should_store: true
          expected_data:
            type: "reminder"
      
      - turn: 2
        user_input: "学校通知，改到下周五了"
        expected_behavior:
          intent: "修改提醒时间"
          key_actions: ["更新提醒时间", "识别为下周五"]
          response_should: "确认时间已修改"
        data_verification:
          should_store: true  # 应该更新记录
      
      - turn: 3
        user_input: "大女儿家长会是哪天？"
        expected_behavior:
          intent: "查询提醒"
          key_actions: ["查询相关提醒", "返回正确时间"]
          response_should: "回答下周五"
        data_verification:
          should_store: false
  
  - test_id: "MT003"
    test_name: "多轮查询-澄清对象"
    priority: "P0"
    difficulty: "simple"
    turns:
      - turn: 1
        user_input: "查一下孩子最近的健康记录"
        expected_behavior:
          intent: "查询健康记录，但对象不明确"
          key_actions: ["识别需要澄清", "询问是哪个孩子"]
          response_should: "询问是女儿还是儿子"
        data_verification:
          should_store: false
      
      - turn: 2
        user_input: "儿子的"
        expected_behavior:
          intent: "明确对象后查询"
          key_actions: ["查询儿子的健康记录", "返回结果"]
          response_should: "给出儿子的健康记录"
        data_verification:
          should_store: false
  
  - test_id: "MT004"
    test_name: "多轮记账-分步输入"
    priority: "P0"
    difficulty: "simple"
    turns:
      - turn: 1
        user_input: "今天买了菜"
        expected_behavior:
          intent: "记账意图，缺少金额"
          key_actions: ["识别缺少金额", "询问花了多少钱"]
          response_should: "询问花了多少钱"
        data_verification:
          should_store: false
      
      - turn: 2
        user_input: "50元"
        expected_behavior:
          intent: "补充金额完成记账"
          key_actions: ["存储账目", "金额50元", "类目食材"]
          response_should: "确认记账成功"
        data_verification:
          should_store: true
          expected_data:
            type: "expense"
            amount: 50.0
            category: "食材"
            sub_category: "蔬菜"
          tolerance:
            amount: 0
          required_fields: ["type", "category", "sub_category", "amount"]
  
  - test_id: "MT005"
    test_name: "多轮信息-更新内容"
    priority: "P0"
    difficulty: "medium"
    turns:
      - turn: 1
        user_input: "记一下，大门钥匙放在沙发垫子下面了"
        expected_behavior:
          intent: "记录家庭信息"
          key_actions: ["存储信息", "关键词：大门钥匙、沙发垫子"]
          response_should: "确认已记录"
        data_verification:
          should_store: true
          expected_data:
            type: "household_info"
      
      - turn: 2
        user_input: "钥匙放到衣柜上面了"
        expected_behavior:
          intent: "更新家庭信息"
          key_actions: ["更新钥匙位置", "识别为同一物品"]
          response_should: "确认已更新位置"
        data_verification:
          should_store: true  # 应该更新而不是新增
      
      - turn: 3
        user_input: "大门钥匙在哪？"
        expected_behavior:
          intent: "查询家庭信息"
          key_actions: ["查询钥匙位置", "返回最新位置"]
          response_should: "回答在衣柜上面"
        data_verification:
          should_store: false
  
  - test_id: "MT006"
    test_name: "多轮预算-追问并设置"
    priority: "P0"
    difficulty: "medium"
    turns:
      - turn: 1
        user_input: "帮我设置一下本月预算"
        expected_behavior:
          intent: "设置预算，但缺少具体金额"
          key_actions: ["识别设置预算意图", "询问预算金额"]
          response_should: "询问总预算金额，或各类目预算"
        data_verification:
          should_store: false
      
      - turn: 2
        user_input: "总预算10000元，食材3000、外出就餐1000、少儿培训2000"
        expected_behavior:
          intent: "完成预算设置"
          key_actions: ["存储预算配置", "记录各类目预算"]
          response_should: "确认预算已设置，复述主要类目"
        data_verification:
          should_store: true
          expected_data:
            type: "budget_config"
