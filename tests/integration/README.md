# FAA é›†æˆæµ‹è¯•å¥—ä»¶

å®Œæ•´çš„ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•ï¼ŒéªŒè¯FAAçš„å®é™…ä½¿ç”¨åœºæ™¯ã€‚

## ğŸ“‹ è®¾è®¡åŸåˆ™

æœ¬æµ‹è¯•å¥—ä»¶éµå¾ªä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š

1. **ä»¥æœ€ç»ˆç›®æ ‡ä¸ºå¯¼å‘**ï¼šæµ‹è¯•åŸºäº readme.MD ä¸­çš„å®é™…ä½¿ç”¨åœºæ™¯
2. **ä»¥AIé©±åŠ¨ç†å¿µä¸ºæ ¸å¿ƒ**ï¼šé‡ç‚¹æµ‹è¯•AIçš„ç†è§£ã€å†³ç­–å’Œæ‰§è¡Œèƒ½åŠ›
3. **ç®€æ´ã€ç›´æ¥ã€ç¨³å®š**ï¼šåŠŸèƒ½æ€§éªŒè¯ï¼Œä¸è¿‡åº¦ç»†åŒ–

## ğŸ¯ æµ‹è¯•è¦†ç›–

### P0 - æ ¸å¿ƒå¿…æµ‹åŠŸèƒ½ï¼ˆ40ä¸ªç”¨ä¾‹ï¼‰

| æµ‹è¯•å¥—ä»¶ | æ–‡ä»¶ | ç”¨ä¾‹ | è¯´æ˜ |
|---------|------|------|------|
| åŸºç¡€è®°è´¦ | test_p0_accounting.py | TC001-TC008 | ç®€å•è®°è´¦ã€æ¾„æ¸…ã€ç±»ç›®æ˜ å°„ã€è·¨æœˆè®°è´¦ |
| é¢„ç®—æ ¸å¿ƒ | test_p0_budget.py | TC009-TC013 | è®¾ç½®é¢„ç®—ã€æŸ¥è¯¢ã€é¢„ç®—è­¦å‘Š |
| åŸºç¡€æŸ¥è¯¢ | test_p0_query.py | TC015-TC018 | æœˆåº¦æŸ¥è¯¢ã€æŒ‰ç±»ç›®/æ—¶é—´/äººå‘˜æŸ¥è¯¢ |
| å¥åº·è®°å½• | test_p0_health.py | TC026-TC028 | è®°å½•èº«é«˜ä½“é‡ã€å¤šæŒ‡æ ‡ä½“æ£€ |
| åŸºç¡€æé†’ | test_p0_reminder.py | TC038-TC041 | è®¾ç½®æé†’ã€æå‰æé†’ã€æ¾„æ¸… |
| ä¿¡æ¯ç®¡ç† | test_p0_info.py | TC052-TC055 | å­˜å‚¨/æ›´æ–°/æŸ¥è¯¢é‡è¦ä¿¡æ¯ |
| æ¾„æ¸…åŠŸèƒ½ | test_p0_clarification.py | TC070-TC073 | å¤šå­—æ®µæ¾„æ¸…ã€å¤šè½®å¯¹è¯ |
| æ•°æ®å‡†ç¡®æ€§ | test_p0_data_accuracy.py | TC090-TC096 | å­˜å‚¨æ£€ç´¢æ›´æ–°ã€æ—¶åŒºã€æ—¥æœŸè§£æ |
| æ—¥å¸¸åœºæ™¯ | test_p0_scenarios.py | TC104-TC109 | æ€§èƒ½æµ‹è¯•ã€æ—¥å¸¸ä½¿ç”¨æµç¨‹ |

### P1 - é‡è¦åŠŸèƒ½ï¼ˆ40ä¸ªç”¨ä¾‹ï¼‰

| æµ‹è¯•å¥—ä»¶ | æ–‡ä»¶ | ç”¨ä¾‹ | è¯´æ˜ |
|---------|------|------|------|
| é«˜çº§æŸ¥è¯¢ | test_p1_advanced_query.py | TC019-TC022 | è¶‹åŠ¿åˆ†æã€æœˆåº¦å¯¹æ¯”ã€æ¨¡å¼è¯†åˆ« |
| å¯è§†åŒ– | test_p1_visualization.py | TC023-TC025 | é¥¼å›¾ã€æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ |
| å¥åº·åˆ†æ | test_p1_health_analysis.py | TC032-TC037 | æˆé•¿æ›²çº¿ã€ç–«è‹—è®°å½•ã€å¥åº·å»ºè®® |
| æé†’ç®¡ç† | test_p1_reminder_management.py | TC044-TC048 | æŸ¥è¯¢ã€ä¿®æ”¹ã€å–æ¶ˆã€å®Œæˆæé†’ |
| è¯­éŸ³è¾“å…¥ | test_p1_voice_input.py | TC059-TC062 | è¯­éŸ³è®°è´¦ã€å£è¯­åŒ–ç†è§£ï¼ˆå¾…å®ç°ï¼‰ |
| å›¾ç‰‡è¯†åˆ« | test_p1_image_recognition.py | TC063-TC066 | æˆªå›¾è¯†åˆ«ã€å°ç¥¨è¯†åˆ«ï¼ˆå¾…å®ç°ï¼‰ |
| å¤æ‚æŸ¥è¯¢ | test_p1_complex_query.py | TC074-TC077 | å¤šç»´æŸ¥è¯¢ã€æ¨ç†åˆ†æï¼ˆå¾…å®ç°ï¼‰ |
| ä¸»åŠ¨åˆ†æ | test_p1_proactive_analysis.py | TC082-TC085 | è‡ªåŠ¨è­¦å‘Šã€å¼‚å¸¸æ£€æµ‹ï¼ˆå¾…å®ç°ï¼‰ |

### P2 - å¢å¼ºåŠŸèƒ½ï¼ˆ36ä¸ªç”¨ä¾‹ï¼‰

| æµ‹è¯•å¥—ä»¶ | æ–‡ä»¶ | ç”¨ä¾‹ | è¯´æ˜ |
|---------|------|------|------|
| ç»¼åˆåœºæ™¯ | test_p2_ç»¼åˆåœºæ™¯.py | TC113-TC116 | ç”Ÿç—…æµç¨‹ã€ç–«è‹—æµç¨‹ã€æ—…è¡Œåœºæ™¯ |
| å…¶ä»–P2æµ‹è¯• | - | - | å¾…å®ç° |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿å·²å®‰è£…ä¾èµ–
cd /Users/guanpei/Develop/family-ai-assistant
pip install -r requirements.txt

# ç¡®ä¿æ•°æ®åº“å·²å¯åŠ¨
docker-compose up -d faa-postgres

# ç¡®ä¿MCPæœåŠ¡å·²å¯åŠ¨
docker-compose up -d faa-mcp
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡ŒP0æ ¸å¿ƒæµ‹è¯•ï¼ˆæ¨èé¦–å…ˆè¿è¡Œï¼‰
python tests/integration/run_tests.py --priority P0

# è¿è¡ŒP1é‡è¦åŠŸèƒ½æµ‹è¯•
python tests/integration/run_tests.py --priority P1

# è¿è¡ŒP2å¢å¼ºåŠŸèƒ½æµ‹è¯•
python tests/integration/run_tests.py --priority P2

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python tests/integration/run_tests.py --all

# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
python tests/integration/run_tests.py --suite accounting
python tests/integration/run_tests.py --suite budget
python tests/integration/run_tests.py --suite query
```

### å•ç‹¬è¿è¡ŒæŸä¸ªæµ‹è¯•æ–‡ä»¶

```bash
# è¿è¡ŒåŸºç¡€è®°è´¦æµ‹è¯•
python tests/integration/test_p0_accounting.py

# è¿è¡Œé¢„ç®—ç®¡ç†æµ‹è¯•
python tests/integration/test_p0_budget.py

# å…¶ä»–æµ‹è¯•æ–‡ä»¶åŒç†
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼ŒæŠ¥å‘Šä¼šè‡ªåŠ¨ä¿å­˜åˆ° `tests/integration/reports/` ç›®å½•ï¼š

```
reports/
â”œâ”€â”€ test_report_P0_20251010_143022.json
â”œâ”€â”€ test_report_P1_20251010_150145.json
â””â”€â”€ test_report_ALL_20251010_153530.json
```

æŠ¥å‘Šæ ¼å¼ï¼ˆJSONï¼‰ï¼š
```json
{
  "scope": "P0",
  "timestamp": "20251010_143022",
  "start_time": "2025-10-10T14:30:22",
  "end_time": "2025-10-10T14:35:45",
  "results": [...]
}
```

## ğŸ” æ•°æ®éš”ç¦»æœºåˆ¶

### æµ‹è¯•ç”¨æˆ·ID

æ‰€æœ‰æµ‹è¯•ä½¿ç”¨ `test_user_integration_` å‰ç¼€çš„ç”¨æˆ·IDï¼š

- `test_user_integration_p0_accounting`
- `test_user_integration_p0_budget`
- `test_user_integration_p0_query`
- ... ç­‰

### æ•°æ®æ¸…ç†

```bash
# æµ‹è¯•é»˜è®¤ä¸æ¸…ç†æ•°æ®ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
# å¦‚éœ€æ‰‹åŠ¨æ¸…ç†ï¼Œåœ¨æµ‹è¯•ç±»ä¸­è°ƒç”¨ï¼š
await tester.cleanup()
```

æˆ–ç›´æ¥æŸ¥è¯¢æ•°æ®åº“æ¸…ç†ï¼š

```sql
-- æ¸…ç†æ‰€æœ‰æµ‹è¯•æ•°æ®
DELETE FROM memories WHERE user_id LIKE 'test_user_integration_%';
DELETE FROM reminders WHERE user_id LIKE 'test_user_integration_%';
DELETE FROM interactions WHERE user_id LIKE 'test_user_integration_%';
```

## ğŸ“ æµ‹è¯•ç»“æœç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ æµ‹è¯•å¥—ä»¶: åŸºç¡€è®°è´¦åŠŸèƒ½                                        TC001-TC008 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

================================================================================
[TC001] ç®€å•è®°è´¦ - å®Œæ•´ä¿¡æ¯
================================================================================
è¾“å…¥ï¼šä»Šå¤©ä¹°èœèŠ±äº†80å…ƒ

AIå›å¤ï¼š
âœ… å·²è®°å½•é¤é¥®æ”¯å‡º80å…ƒï¼Œæœ¬æœˆé¤é¥®æ”¯å‡º890å…ƒ

è€—æ—¶ï¼š3.45ç§’
âœ… æµ‹è¯•é€šè¿‡

================================================================================
æµ‹è¯•æ€»ç»“ - p0_accounting
================================================================================
æ€»æµ‹è¯•æ•°ï¼š15
âœ… é€šè¿‡ï¼š14 (93.3%)
âŒ å¤±è´¥ï¼š1 (6.7%)
å¹³å‡è€—æ—¶ï¼š4.23ç§’

è¯¦ç»†ç»“æœï¼š
1. âœ… [TC001] ç®€å•è®°è´¦ - å®Œæ•´ä¿¡æ¯ (3.45s)
2. âœ… [TC002] è®°è´¦ - ç¼ºå°‘é‡‘é¢ï¼ˆæ¾„æ¸…ï¼‰ (2.78s)
...
```

## ğŸ› ï¸ æ‰©å±•æµ‹è¯•

### æ·»åŠ æ–°æµ‹è¯•ç”¨ä¾‹

1. åœ¨å¯¹åº”ä¼˜å…ˆçº§çš„æµ‹è¯•æ–‡ä»¶ä¸­æ·»åŠ æ–¹æ³•ï¼š

```python
async def test_tcXXX_your_test_name(self):
    """
    TCXXX: æµ‹è¯•åç§°
    
    éªŒè¯ç‚¹ï¼š
    1. éªŒè¯ç‚¹1
    2. éªŒè¯ç‚¹2
    """
    await self.run_test(
        test_id="TCXXX",
        test_name="æµ‹è¯•åç§°",
        message="ç”¨æˆ·è¾“å…¥",
        expected_keywords=["å…³é”®è¯1", "å…³é”®è¯2"],
        verify_db=verify_function  # å¯é€‰
    )
```

2. åœ¨æµ‹è¯•ç±»çš„ `main()` å‡½æ•°ä¸­è°ƒç”¨ï¼š

```python
await tester.test_tcXXX_your_test_name()
```

### åˆ›å»ºæ–°æµ‹è¯•å¥—ä»¶

1. åˆ›å»ºæ–°æ–‡ä»¶ `test_pX_new_suite.py`
2. ç»§æ‰¿ `IntegrationTestBase`
3. å®ç°æµ‹è¯•æ–¹æ³•
4. åœ¨ `run_tests.py` çš„ `TEST_SUITES` ä¸­æ³¨å†Œ

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### 1. è¿è¡Œé¡ºåº

- **é¦–æ¬¡è¿è¡Œ**ï¼šå»ºè®®å…ˆè¿è¡Œ P0ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸
- **CI/CD**ï¼šæ¯æ¬¡ä»£ç æäº¤è¿è¡Œ P0ï¼Œå®šæœŸè¿è¡Œ P0+P1
- **å‘å¸ƒå‰**ï¼šè¿è¡Œå…¨é‡æµ‹è¯•ï¼ˆP0+P1+P2ï¼‰

### 2. æµ‹è¯•æ•°æ®

- æµ‹è¯•ä¼šåˆ›å»ºçœŸå®çš„æ•°æ®åº“è®°å½•
- ä½¿ç”¨ç‹¬ç«‹çš„testç”¨æˆ·IDï¼Œä¸å½±å“ç”Ÿäº§æ•°æ®
- é»˜è®¤ä¿ç•™æµ‹è¯•æ•°æ®ä¾¿äºè°ƒè¯•

### 3. æ€§èƒ½é¢„æœŸ

- P0 å…¨å¥—æµ‹è¯•ï¼šçº¦15-20åˆ†é’Ÿ
- P1 å…¨å¥—æµ‹è¯•ï¼šçº¦20-25åˆ†é’Ÿ
- P2 å…¨å¥—æµ‹è¯•ï¼šçº¦15-20åˆ†é’Ÿ
- å•ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š3-10ç§’

### 4. AIå“åº”çš„ä¸ç¡®å®šæ€§

- AIå›å¤å¯èƒ½æœ‰å˜åŒ–ï¼Œå…³é”®è¯éªŒè¯è¾ƒå®½æ¾
- é‡ç‚¹éªŒè¯åŠŸèƒ½å®ç°ï¼Œè€Œéå…·ä½“æªè¾
- å¤æ‚åœºæ™¯å¯èƒ½éœ€è¦å¤šæ¬¡è¿è¡ŒéªŒè¯ç¨³å®šæ€§

## ğŸ› æ•…éšœæ’æŸ¥

### æµ‹è¯•å¤±è´¥å¸¸è§åŸå› 

1. **MCPæœåŠ¡æœªå¯åŠ¨**
   ```bash
   docker-compose ps  # æ£€æŸ¥æœåŠ¡çŠ¶æ€
   docker-compose logs faa-mcp  # æŸ¥çœ‹MCPæ—¥å¿—
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   docker-compose ps faa-postgres
   psql -U postgres -h localhost -d faa  # æµ‹è¯•è¿æ¥
   ```

3. **AIå¼•æ“åˆå§‹åŒ–å¤±è´¥**
   - æ£€æŸ¥ `OPENAI_API_KEY` ç¯å¢ƒå˜é‡
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - æŸ¥çœ‹åº”ç”¨æ—¥å¿—

4. **æŸä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥**
   - æŸ¥çœ‹è¯¦ç»†æ—¥å¿—è¾“å‡º
   - å•ç‹¬è¿è¡Œè¯¥æµ‹è¯•æ–‡ä»¶è°ƒè¯•
   - æ£€æŸ¥æ•°æ®åº“ä¸­çš„å®é™…æ•°æ®

### æ—¥å¿—è°ƒè¯•

```bash
# å¼€å¯è°ƒè¯•æ¨¡å¼
export DEBUG=true

# è¿è¡Œæµ‹è¯•
python tests/integration/run_tests.py --priority P0

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f logs/faa.log
```

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [é¡¹ç›®æ ¸å¿ƒç†å¿µ](../../readme.MD)
- [æ¶æ„è®¾è®¡](../../ARCHITECTURE.md)
- [Promptç®¡ç†](../../prompts/family_assistant_prompts.yaml)
- [AIå¼•æ“å·¥ä½œæµ](../../docs/AI_ENGINE_TECHNICAL.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼è¯·ç¡®ä¿ï¼š

1. æµ‹è¯•è¦†ç›–çœŸå®ä½¿ç”¨åœºæ™¯
2. éªŒè¯ç‚¹æ¸…æ™°æ˜ç¡®
3. æ³¨é‡Šè¯¦ç»†æ˜“æ‡‚
4. éµå¾ªç°æœ‰å‘½åè§„èŒƒ
5. æäº¤å‰è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡

---

**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-10  
**ç»´æŠ¤è€…**: FAA Development Team

